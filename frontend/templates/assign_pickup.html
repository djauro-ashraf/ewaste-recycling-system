{% extends "base.html" %}

{% block title %}Assign Pickup{% endblock %}

{% block content %}
<h2>Assign Pickup to Staff</h2>

<form method="POST" action="{{ url_for('assign_pickup') }}">
    <table>
        <tr>
            <td><label for="pickup_id">Pickup Request:</label></td>
            <td>
                <select name="pickup_id" id="pickup_id" required>
                    <option value="">-- Select Pickup --</option>
                    {% for pickup in pickups %}
                    <option value="{{ pickup.pickup_id }}">
                        #{{ pickup.pickup_id }} - {{ pickup.full_name }} - {{ pickup.preferred_date }} - {{ pickup.total_weight_kg }}kg
                    </option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <td><label for="staff_id">Staff Member:</label></td>
            <td>
                <select name="staff_id" id="staff_id" required>
                    <option value="">-- Select Staff --</option>
                    {% for member in staff %}
                    <option value="{{ member.staff_id }}">{{ member.staff_name }} ({{ member.role }})</option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <td><label for="vehicle_id">Vehicle:</label></td>
            <td>
                <select name="vehicle_id" id="vehicle_id" required>
                    <option value="">-- Select Vehicle --</option>
                    {% for vehicle in vehicles %}
                    <option value="{{ vehicle.vehicle_id }}">
                        {{ vehicle.vehicle_number }} - {{ vehicle.vehicle_type }} ({{ vehicle.capacity_kg }}kg capacity)
                    </option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <td><label for="facility_id">Recycling Facility:</label></td>
            <td>
                <select name="facility_id" id="facility_id" required>
                    <option value="">-- Select Facility --</option>
                    {% for facility in facilities %}
                    <option value="{{ facility.facility_id }}">
                        {{ facility.facility_name }} - {{ facility.location }} ({{ facility.specialization }})
                    </option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <button type="submit">Assign Pickup</button>
                <a href="{{ url_for('staff_dashboard') }}">Cancel</a>
            </td>
        </tr>
    </table>
</form>
{% endblock %}
