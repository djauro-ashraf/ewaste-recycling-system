{% extends "base.html" %}

{% block title %}Add Items to Pickup{% endblock %}

{% block content %}
<h2>Add Items to Pickup</h2>

<form method="POST" action="{{ url_for('add_items') }}">
    <table>
        <tr>
            <td><label for="pickup_id">Pickup Request:</label></td>
            <td>
                <select name="pickup_id" id="pickup_id" required>
                    <option value="">-- Select Pickup --</option>
                    {% for pickup in pickups %}
                    <option value="{{ pickup.pickup_id }}">
                        Pickup #{{ pickup.pickup_id }} - User {{ pickup.user_id }} - {{ pickup.preferred_date }} ({{ pickup.status }})
                    </option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <td><label for="category_id">Category:</label></td>
            <td>
                <select name="category_id" id="category_id" required>
                    <option value="">-- Select Category --</option>
                    {% for category in categories %}
                    <option value="{{ category.category_id }}">
                        {{ category.category_name }} - ${{ category.base_price_per_kg }}/kg (Hazard: {{ category.hazard_level }})
                    </option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <td><label for="description">Item Description:</label></td>
            <td><textarea name="description" id="description" rows="3" required></textarea></td>
        </tr>
        <tr>
            <td><label for="condition">Condition:</label></td>
            <td>
                <select name="condition" id="condition" required>
                    <option value="working">Working</option>
                    <option value="broken" selected>Broken</option>
                    <option value="repairable">Repairable</option>
                </select>
            </td>
        </tr>
        <tr>
            <td><label for="estimated_weight">Estimated Weight (kg):</label></td>
            <td><input type="number" step="0.01" name="estimated_weight" id="estimated_weight"></td>
        </tr>
        <tr>
            <td colspan="2">
                <button type="submit">Add Item</button>
                <a href="{{ url_for('list_items') }}">Cancel</a>
            </td>
        </tr>
    </table>
</form>

<h3>Recently Added Items</h3>
<p><a href="{{ url_for('list_items') }}">View All Items</a></p>
{% endblock %}
